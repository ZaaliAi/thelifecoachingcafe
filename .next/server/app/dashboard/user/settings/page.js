(()=>{var e={};e.id=5899,e.ids=[5899],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},7533:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>r});let r=(0,t(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/home/user/studio/src/app/dashboard/user/settings/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/user/studio/src/app/dashboard/user/settings/page.tsx","default")},8258:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>n.a,__next_app__:()=>u,pages:()=>c,routeModule:()=>m,tree:()=>l});var r=t(65239),a=t(48088),i=t(88170),n=t.n(i),o=t(30893),d={};for(let e in o)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>o[e]);t.d(s,d);let l={children:["",{children:["dashboard",{children:["user",{children:["settings",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,7533)),"/home/user/studio/src/app/dashboard/user/settings/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,63144)),"/home/user/studio/src/app/dashboard/layout.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(t.bind(t,82893)),"/home/user/studio/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(t.t.bind(t,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(t.t.bind(t,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,c=["/home/user/studio/src/app/dashboard/user/settings/page.tsx"],u={require:t,loadChunk:()=>Promise.resolve()},m=new r.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/dashboard/user/settings/page",pathname:"/dashboard/user/settings",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},14975:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(82614).A)("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},16998:(e,s,t)=>{Promise.resolve().then(t.bind(t,36027))},18853:(e,s,t)=>{"use strict";t.d(s,{X:()=>i});var r=t(43210),a=t(66156);function i(e){let[s,t]=r.useState(void 0);return(0,a.N)(()=>{if(e){t({width:e.offsetWidth,height:e.offsetHeight});let s=new ResizeObserver(s=>{let r,a;if(!Array.isArray(s)||!s.length)return;let i=s[0];if("borderBoxSize"in i){let e=i.borderBoxSize,s=Array.isArray(e)?e[0]:e;r=s.inlineSize,a=s.blockSize}else r=e.offsetWidth,a=e.offsetHeight;t({width:r,height:a})});return s.observe(e,{box:"border-box"}),()=>s.unobserve(e)}t(void 0)},[e]),s}},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},19771:e=>{"use strict";e.exports=require("process")},21724:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(82614).A)("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]])},21820:e=>{"use strict";e.exports=require("os")},25246:(e,s,t)=>{Promise.resolve().then(t.bind(t,7533))},27479:(e,s,t)=>{"use strict";t.d(s,{d:()=>N});var r=t(60687),a=t(43210),i=t(70569),n=t(98599),o=t(11273),d=t(65551),l=t(83721),c=t(18853),u=t(14163),m="Switch",[p,h]=(0,o.A)(m),[x,f]=p(m),w=a.forwardRef((e,s)=>{let{__scopeSwitch:t,name:o,checked:l,defaultChecked:c,required:m,disabled:p,value:h="on",onCheckedChange:f,form:w,...b}=e,[g,j]=a.useState(null),N=(0,n.s)(s,e=>j(e)),P=a.useRef(!1),k=!g||w||!!g.closest("form"),[A=!1,C]=(0,d.i)({prop:l,defaultProp:c,onChange:f});return(0,r.jsxs)(x,{scope:t,checked:A,disabled:p,children:[(0,r.jsx)(u.sG.button,{type:"button",role:"switch","aria-checked":A,"aria-required":m,"data-state":y(A),"data-disabled":p?"":void 0,disabled:p,value:h,...b,ref:N,onClick:(0,i.m)(e.onClick,e=>{C(e=>!e),k&&(P.current=e.isPropagationStopped(),P.current||e.stopPropagation())})}),k&&(0,r.jsx)(v,{control:g,bubbles:!P.current,name:o,value:h,checked:A,required:m,disabled:p,form:w,style:{transform:"translateX(-100%)"}})]})});w.displayName=m;var b="SwitchThumb",g=a.forwardRef((e,s)=>{let{__scopeSwitch:t,...a}=e,i=f(b,t);return(0,r.jsx)(u.sG.span,{"data-state":y(i.checked),"data-disabled":i.disabled?"":void 0,...a,ref:s})});g.displayName=b;var v=e=>{let{control:s,checked:t,bubbles:i=!0,...n}=e,o=a.useRef(null),d=(0,l.Z)(t),u=(0,c.X)(s);return a.useEffect(()=>{let e=o.current,s=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(d!==t&&s){let r=new Event("click",{bubbles:i});s.call(e,t),e.dispatchEvent(r)}},[d,t,i]),(0,r.jsx)("input",{type:"checkbox","aria-hidden":!0,defaultChecked:t,...n,tabIndex:-1,ref:o,style:{...e.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function y(e){return e?"checked":"unchecked"}var j=t(4780);let N=a.forwardRef(({className:e,...s},t)=>(0,r.jsx)(w,{className:(0,j.cn)("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...s,ref:t,children:(0,r.jsx)(g,{className:(0,j.cn)("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));N.displayName=w.displayName},27910:e=>{"use strict";e.exports=require("stream")},28354:e=>{"use strict";e.exports=require("util")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},34631:e=>{"use strict";e.exports=require("tls")},36027:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>q});var r=t(60687),a=t(43210),i=t(27605),n=t(63442),o=t(9275),d=t(29523),l=t(89667),c=t(80013),u=t(44493),m=t(55925),p=t(11516),h=t(72963),x=t(44802),f=t(21724),w=t(64181),b=t(14975),g=t(71273),v=t(29867),y=t(27479),j=t(44957),N=t(79396),P=t(7828),k=t(24890),A=t(33784);let C=o.z.object({name:o.z.string().min(2,"Name must be at least 2 characters."),email:o.z.string().email("Invalid email address."),currentPassword:o.z.string().optional(),newPassword:o.z.string().optional(),confirmNewPassword:o.z.string().optional(),enableNotifications:o.z.boolean().default(!1)}).refine(e=>(!e.newPassword||!!e.currentPassword)&&(!e.newPassword||!(e.newPassword.length<8))&&(!e.newPassword||e.newPassword===e.confirmNewPassword),{message:"New passwords must be at least 8 characters and match, and current password is required if changing password.",path:["confirmNewPassword"]});function q(){let[e,s]=(0,a.useState)(!1),[t,o]=(0,a.useState)(!1),[q,S]=(0,a.useState)(!0),[z,E]=(0,a.useState)(!1),{user:R,loading:F}=(0,j.A)(),{toast:M}=(0,v.dj)(),{register:_,handleSubmit:D,control:I,reset:T,formState:{errors:G,isDirty:Z}}=(0,i.mN)({resolver:(0,n.u)(C),defaultValues:{name:"",email:"",enableNotifications:!1,currentPassword:"",newPassword:"",confirmNewPassword:""}}),J=async e=>{if(s(!0),!R||!R.id){M({title:"Authentication Error",description:"You must be logged in.",variant:"destructive"}),s(!1);return}try{var t;let r={name:e.name,enableNotifications:e.enableNotifications};t=r,r=Object.entries(t).filter(([e,s])=>void 0!==s).reduce((e,[s,t])=>({...e,[s]:t}),{}),await (0,N.p)(R.id,r);let a=!1;if(e.newPassword&&e.currentPassword){let s=(0,P.xI)(A.xv).currentUser;if(!s||!s.email)throw Error("You must be logged in to update your password.");let t=P.IX.credential(s.email,e.currentPassword);await (0,P.kZ)(s,t),await (0,P.f3)(s,e.newPassword),a=!0,M({title:"Password Updated",description:"Your password was updated successfully."})}else if(e.newPassword&&!e.currentPassword){M({title:"Password Error",description:"Current password is required to set a new password.",variant:"destructive"}),s(!1);return}M({title:"Settings Updated!",description:`Your settings have been saved. ${a?"Password has been changed.":""}`}),T({...e,currentPassword:"",newPassword:"",confirmNewPassword:""},{keepDirty:!1})}catch(s){console.error("Error updating settings:",s);let e=s?.message||"Could not save settings. Please try again.";"auth/wrong-password"===s.code&&(e="The current password you entered is incorrect."),"auth/weak-password"===s.code&&(e="The new password is too weak. Please use at least 8 characters."),"auth/too-many-requests"===s.code&&(e="Too many failed attempts. Please try again later."),M({title:"Update Failed",description:e,variant:"destructive"})}finally{s(!1)}},O=async()=>{o(!0),E(!1);try{let e=(0,k.Uz)(A.xv),s=(0,k.Qg)(e,"deleteUserAccount"),t=await s();M({title:"Account Deletion Successful",description:t.data.message||"Your account has been permanently deleted."});let r=(0,P.xI)(A.xv);await (0,P.CI)(r),window.location.href="/"}catch(s){console.error("Error deleting account:",s);let e="Could not delete your account. Please try again later.";s&&"string"==typeof s.code&&"string"==typeof s.message?e=s.message:s.message&&(e=s.message),M({title:"Account Deletion Failed",description:e,variant:"destructive"})}finally{o(!1)}};return F?(0,r.jsx)("div",{className:"flex items-center justify-center min-h-[calc(100vh-200px)]",children:(0,r.jsx)(p.A,{className:"h-12 w-12 animate-spin text-primary"})}):R||F?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(u.Zp,{className:"shadow-lg max-w-2xl mx-auto",children:[(0,r.jsxs)(u.aR,{children:[(0,r.jsxs)(u.ZB,{className:"text-2xl flex items-center",children:[(0,r.jsx)(x.A,{className:"mr-3 h-7 w-7 text-primary"}),"Account Settings"]}),(0,r.jsx)(u.BT,{children:"Manage your profile information, password, and notification preferences."})]}),q?(0,r.jsx)(u.Wu,{className:"py-10 flex items-center justify-center",children:(0,r.jsx)(p.A,{className:"h-10 w-10 animate-spin text-primary"})}):(0,r.jsxs)("form",{onSubmit:D(J),children:[(0,r.jsxs)(u.Wu,{className:"space-y-8 pt-6",children:[(0,r.jsxs)("section",{children:[(0,r.jsx)("h3",{className:"text-lg font-semibold mb-4 border-b pb-2",children:"Profile Information"}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsx)(c.J,{htmlFor:"name",children:"Full Name"}),(0,r.jsx)(i.xI,{name:"name",control:I,render:({field:e})=>(0,r.jsx)(l.p,{id:"name",...e,className:G.name?"border-destructive":""})}),G.name&&(0,r.jsx)("p",{className:"text-sm text-destructive",children:G.name.message})]}),(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsx)(c.J,{htmlFor:"email",children:"Email Address"}),(0,r.jsx)(i.xI,{name:"email",control:I,render:({field:e})=>(0,r.jsx)(l.p,{id:"email",type:"email",...e,readOnly:!0,className:"bg-muted/50 cursor-not-allowed"})})]})]})]}),(0,r.jsxs)("section",{children:[(0,r.jsxs)("h3",{className:"text-lg font-semibold mb-4 border-b pb-2 flex items-center",children:[(0,r.jsx)(f.A,{className:"mr-2 h-5 w-5 text-muted-foreground"}),"Change Password"]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsx)(c.J,{htmlFor:"currentPassword",children:"Current Password"}),(0,r.jsx)(l.p,{id:"currentPassword",type:"password",..._("currentPassword"),autoComplete:"current-password"}),G.confirmNewPassword&&!G.newPassword&&(0,r.jsx)("p",{className:"text-sm text-destructive",children:G.confirmNewPassword.message})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsx)(c.J,{htmlFor:"newPassword",children:"New Password"}),(0,r.jsx)(l.p,{id:"newPassword",type:"password",..._("newPassword"),className:G.newPassword?"border-destructive":"",autoComplete:"new-password"}),G.newPassword&&(0,r.jsx)("p",{className:"text-sm text-destructive",children:G.newPassword.message})]}),(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsx)(c.J,{htmlFor:"confirmNewPassword",children:"Confirm New Password"}),(0,r.jsx)(l.p,{id:"confirmNewPassword",type:"password",..._("confirmNewPassword"),className:G.confirmNewPassword?"border-destructive":"",autoComplete:"new-password"}),G.confirmNewPassword&&G.newPassword&&(0,r.jsx)("p",{className:"text-sm text-destructive",children:G.confirmNewPassword.message})]})]})]})]}),(0,r.jsxs)("section",{children:[(0,r.jsxs)("h3",{className:"text-lg font-semibold mb-4 border-b pb-2 flex items-center",children:[(0,r.jsx)(w.A,{className:"mr-2 h-5 w-5 text-muted-foreground"}),"Notification Settings"]}),(0,r.jsxs)("div",{className:"flex items-center justify-between p-4 border rounded-md bg-muted/20",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(c.J,{htmlFor:"enableNotifications",className:"text-base font-medium",children:"Enable Email Notifications"}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"Receive updates about messages and platform news."})]}),(0,r.jsx)(i.xI,{name:"enableNotifications",control:I,render:({field:e})=>(0,r.jsx)(y.d,{id:"enableNotifications",checked:e.value,onCheckedChange:e.onChange,"aria-label":"Toggle email notifications"})})]})]}),(0,r.jsxs)("section",{children:[(0,r.jsxs)("h3",{className:"text-lg font-semibold mb-4 border-b pb-2 flex items-center text-destructive",children:[(0,r.jsx)(b.A,{className:"mr-2 h-5 w-5"}),"Danger Zone"]}),(0,r.jsx)("div",{className:"p-4 border border-destructive/50 rounded-md bg-destructive/5 space-y-4",children:(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(c.J,{htmlFor:"deleteAccountButton",className:"text-base font-medium text-destructive",children:"Delete Account"}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"Permanently delete your account and all associated data. This action cannot be undone."})]}),(0,r.jsx)(d.$,{id:"deleteAccountButton",variant:"destructive",type:"button",onClick:()=>{if(!R)return void M({title:"Error",description:"You must be logged in to delete your account.",variant:"destructive"});E(!0)},className:"mt-3 sm:mt-0 sm:ml-4",disabled:t||e,children:t?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(p.A,{className:"mr-2 h-4 w-4 animate-spin"})," Deleting..."]}):"Delete My Account"})]})})]})]}),(0,r.jsx)(u.wL,{className:"pt-6 border-t mt-6",children:(0,r.jsx)(d.$,{type:"submit",disabled:e||q||!Z||t,size:"lg",className:"w-full sm:w-auto ml-auto bg-primary hover:bg-primary/90 text-primary-foreground",children:e?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(p.A,{className:"mr-2 h-5 w-5 animate-spin"}),"Saving..."]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(g.A,{className:"mr-2 h-5 w-5"})," Save Changes"]})})})]})]}),(0,r.jsx)(m.Lt,{open:z,onOpenChange:E,children:(0,r.jsxs)(m.EO,{children:[(0,r.jsxs)(m.wd,{children:[(0,r.jsx)(m.r7,{children:"Are you absolutely sure?"}),(0,r.jsx)(m.$v,{children:"This action cannot be undone. This will permanently delete your account and remove all your data from our servers. Please be certain before proceeding."})]}),(0,r.jsxs)(m.ck,{children:[(0,r.jsx)(m.Zr,{disabled:t,children:"Cancel"}),(0,r.jsx)(m.Rx,{onClick:O,disabled:t,className:"bg-destructive hover:bg-destructive/90 text-destructive-foreground",children:t?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(p.A,{className:"mr-2 h-4 w-4 animate-spin"})," Deleting..."]}):"Yes, Delete My Account"})]})]})})]}):(0,r.jsxs)(u.Zp,{className:"shadow-lg max-w-2xl mx-auto",children:[(0,r.jsx)(u.aR,{children:(0,r.jsxs)(u.ZB,{className:"text-2xl flex items-center",children:[(0,r.jsx)(h.A,{className:"mr-3 h-7 w-7 text-destructive"}),"Access Denied"]})}),(0,r.jsxs)(u.Wu,{children:[(0,r.jsx)("p",{children:"You need to be logged in to access this page."}),(0,r.jsx)(d.$,{asChild:!0,variant:"link",className:"mt-4 px-0",children:(0,r.jsx)("a",{href:"/login",children:"Go to Login"})})]})]})}},37366:e=>{"use strict";e.exports=require("dns")},55511:e=>{"use strict";e.exports=require("crypto")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},71273:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(82614).A)("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]])},72963:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(82614).A)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},73496:e=>{"use strict";e.exports=require("http2")},74075:e=>{"use strict";e.exports=require("zlib")},78148:(e,s,t)=>{"use strict";t.d(s,{b:()=>o});var r=t(43210),a=t(14163),i=t(60687),n=r.forwardRef((e,s)=>(0,i.jsx)(a.sG.label,{...e,ref:s,onMouseDown:s=>{s.target.closest("button, input, select, textarea")||(e.onMouseDown?.(s),!s.defaultPrevented&&s.detail>1&&s.preventDefault())}}));n.displayName="Label";var o=n},79551:e=>{"use strict";e.exports=require("url")},80013:(e,s,t)=>{"use strict";t.d(s,{J:()=>l});var r=t(60687),a=t(43210),i=t(78148),n=t(24224),o=t(4780);let d=(0,n.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),l=a.forwardRef(({className:e,...s},t)=>(0,r.jsx)(i.b,{ref:t,className:(0,o.cn)(d(),e),...s}));l.displayName=i.b.displayName},81630:e=>{"use strict";e.exports=require("http")},83721:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});var r=t(43210);function a(e){let s=r.useRef({value:e,previous:e});return r.useMemo(()=>(s.current.value!==e&&(s.current.previous=s.current.value,s.current.value=e),s.current.previous),[e])}},89667:(e,s,t)=>{"use strict";t.d(s,{p:()=>n});var r=t(60687),a=t(43210),i=t(4780);let n=a.forwardRef(({className:e,type:s,...t},a)=>(0,r.jsx)("input",{type:s,className:(0,i.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:a,...t}));n.displayName="Input"},91645:e=>{"use strict";e.exports=require("net")},94735:e=>{"use strict";e.exports=require("events")}};var s=require("../../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[4447,2529,1658,3162,2212,291,2400],()=>t(8258));module.exports=r})();