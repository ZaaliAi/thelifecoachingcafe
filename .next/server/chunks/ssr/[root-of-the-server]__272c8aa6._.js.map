{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 39, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/lib/utils.ts"],"sourcesContent":["import { clsx, type ClassValue } from \"clsx\"\nimport { twMerge } from \"tailwind-merge\"\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n"],"names":[],"mappings":";;;AAAA;AACA;;;AAEO,SAAS,GAAG,GAAG,MAAoB;IACxC,OAAO,CAAA,GAAA,2JAAA,CAAA,UAAO,AAAD,EAAE,CAAA,GAAA,qIAAA,CAAA,OAAI,AAAD,EAAE;AACtB","debugId":null}},
    {"offset": {"line": 55, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/button.tsx"],"sourcesContent":["import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-primary text-primary-foreground hover:bg-primary/90\",\n        destructive:\n          \"bg-destructive text-destructive-foreground hover:bg-destructive/90\",\n        outline:\n          \"border border-input bg-background hover:bg-accent hover:text-accent-foreground\",\n        secondary:\n          \"bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n        ghost: \"hover:bg-accent hover:text-accent-foreground\",\n        link: \"text-primary underline-offset-4 hover:underline\",\n      },\n      size: {\n        default: \"h-10 px-4 py-2\",\n        sm: \"h-9 rounded-md px-3\",\n        lg: \"h-11 rounded-md px-8\",\n        icon: \"h-10 w-10\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nexport interface ButtonProps\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\n    VariantProps<typeof buttonVariants> {\n  asChild?: boolean\n}\n\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\n  ({ className, variant, size, asChild = false, ...props }, ref) => {\n    const Comp = asChild ? Slot : \"button\"\n    return (\n      <Comp\n        className={cn(buttonVariants({ variant, size, className }))}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nButton.displayName = \"Button\"\n\nexport { Button, buttonVariants }\n"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;AAEA;;;;;;AAEA,MAAM,iBAAiB,CAAA,GAAA,gKAAA,CAAA,MAAG,AAAD,EACvB,4VACA;IACE,UAAU;QACR,SAAS;YACP,SAAS;YACT,aACE;YACF,SACE;YACF,WACE;YACF,OAAO;YACP,MAAM;QACR;QACA,MAAM;YACJ,SAAS;YACT,IAAI;YACJ,IAAI;YACJ,MAAM;QACR;IACF;IACA,iBAAiB;QACf,SAAS;QACT,MAAM;IACR;AACF;AASF,MAAM,uBAAS,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAC5B,CAAC,EAAE,SAAS,EAAE,OAAO,EAAE,IAAI,EAAE,UAAU,KAAK,EAAE,GAAG,OAAO,EAAE;IACxD,MAAM,OAAO,UAAU,gKAAA,CAAA,OAAI,GAAG;IAC9B,qBACE,8OAAC;QACC,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,eAAe;YAAE;YAAS;YAAM;QAAU;QACxD,KAAK;QACJ,GAAG,KAAK;;;;;;AAGf;AAEF,OAAO,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 235, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/lib/firebase.ts"],"sourcesContent":["import { initializeApp, getApps, getApp } from 'firebase/app';\nimport { getAuth } from 'firebase/auth';\nimport { getFirestore } from 'firebase/firestore';\nimport { getFunctions } from 'firebase/functions';\nimport { getStorage } from 'firebase/storage';\n\nconst firebaseConfig = {\n  apiKey: process.env.NEXT_PUBLIC_FIREBASE_API_KEY,\n  authDomain: process.env.NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN,\n  projectId: process.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID,\n  storageBucket: process.env.NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET,\n  messagingSenderId: process.env.NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID,\n  appId: process.env.NEXT_PUBLIC_FIREBASE_APP_ID,\n};\n\n// Initialize Firebase\nconst app = !getApps().length ? initializeApp(firebaseConfig) : getApp();\nconst auth = getAuth(app);\nconst db = getFirestore(app);\nconst functions = getFunctions(app);\nconst storage = getStorage(app);\n\nexport { app, auth, db, functions, storage };"],"names":[],"mappings":";;;;;;;AAAA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;;;;;;AAEA,MAAM,iBAAiB;IACrB,MAAM;IACN,UAAU;IACV,SAAS;IACT,aAAa;IACb,iBAAiB;IACjB,KAAK;AACP;AAEA,sBAAsB;AACtB,MAAM,MAAM,CAAC,CAAA,GAAA,oLAAA,CAAA,UAAO,AAAD,IAAI,MAAM,GAAG,CAAA,GAAA,oLAAA,CAAA,gBAAa,AAAD,EAAE,kBAAkB,CAAA,GAAA,oLAAA,CAAA,SAAM,AAAD;AACrE,MAAM,OAAO,CAAA,GAAA,yOAAA,CAAA,UAAO,AAAD,EAAE;AACrB,MAAM,KAAK,CAAA,GAAA,iKAAA,CAAA,eAAY,AAAD,EAAE;AACxB,MAAM,YAAY,CAAA,GAAA,0KAAA,CAAA,eAAY,AAAD,EAAE;AAC/B,MAAM,UAAU,CAAA,GAAA,oLAAA,CAAA,aAAU,AAAD,EAAE","debugId":null}},
    {"offset": {"line": 278, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/lib/firestore.ts"],"sourcesContent":["import {\n  collection, doc, setDoc, getDoc, addDoc, query, orderBy, getDocs,\n  serverTimestamp, limit as firestoreLimit, updateDoc, where, deleteDoc, writeBatch, runTransaction, collectionGroup, getCountFromServer,\n  Timestamp, arrayUnion, arrayRemove, documentId // Changed FieldPath to documentId import\n} from \"firebase/firestore\";\nimport { db } from \"./firebase\";\nimport type { FirestoreUserProfile, FirestoreBlogPost, Coach, BlogPost, UserRole, CoachStatus, Message as MessageType, FirestoreMessage } from '@/types';\n\n// --- Helper Function to Generate Conversation ID ---\nconst generateConversationId = (userId1: string, userId2: string): string => {\n  if (!userId1 || !userId2) {\n    console.error(\"[generateConversationId] One or both user IDs are undefined/empty. userId1:\", userId1, \"userId2:\", userId2);\n    return `error_invalid_user_ids_for_conv_id_${String(userId1)}_vs_${String(userId2)}`;\n  }\n  const ids = [userId1, userId2].sort();\n  return ids.join('_');\n};\n\n// --- Utility to remove undefined fields ---\nfunction pruneUndefined<T extends object>(obj: T): Partial<T> {\n  return Object.entries(obj)\n    .filter(([_, v]) => v !== undefined)\n    .reduce((acc, [k, v]) => ({ ...acc, [k]: v }), {}) as Partial<T>;\n}\n\n// --- Helper Functions for Data Mapping ---\nconst mapCoachFromFirestore = (docData: any, id: string): Coach => {\n  const data = docData as Omit<FirestoreUserProfile, 'id'> & { createdAt?: Timestamp, updatedAt?: Timestamp, status?: CoachStatus };\n  return {\n    id,\n    name: data.name || 'Unnamed Coach',\n    email: data.email,\n    bio: data.bio || 'No bio available.',\n    specialties: data.specialties || [],\n    keywords: data.keywords || [],\n    profileImageUrl: data.profileImageUrl === undefined ? null : data.profileImageUrl,\n    dataAiHint: data.dataAiHint,\n    certifications: data.certifications || [],\n    socialLinks: data.socialLinks || [],\n    location: data.location === undefined ? null : data.location,\n    availability: data.availability || [],\n    subscriptionTier: data.subscriptionTier || 'free',\n    status: data.status || 'pending_approval',\n    websiteUrl: data.websiteUrl === undefined ? null : data.websiteUrl,\n    introVideoUrl: data.introVideoUrl === undefined ? null : data.introVideoUrl,\n    createdAt: data.createdAt?.toDate().toISOString(),\n    updatedAt: data.updatedAt?.toDate().toISOString(),\n    dataSource: 'Firestore',\n    isFeaturedOnHomepage: data.isFeaturedOnHomepage || false,\n  };\n};\n\nconst mapBlogPostFromFirestore = (docData: any, id: string): BlogPost => {\n  const data = docData as Partial<FirestoreBlogPost>;\n  let createdAtString: string;\n  if (data.createdAt && typeof (data.createdAt as any).toDate === 'function') {\n    createdAtString = (data.createdAt as Timestamp).toDate().toISOString();\n  } else if (data.createdAt instanceof Date) {\n    createdAtString = data.createdAt.toISOString();\n  } else if (typeof data.createdAt === 'string') {\n    const parsedDate = new Date(data.createdAt);\n    if (!isNaN(parsedDate.getTime())) {\n      createdAtString = parsedDate.toISOString();\n    } else {\n      console.warn(`[mapBlogPostFromFirestore] Invalid date string for createdAt for post ID ${id}: \"${data.createdAt}\". Using current date as fallback.`);\n      createdAtString = new Date().toISOString();\n    }\n  } else {\n    console.warn(`[mapBlogPostFromFirestore] createdAt is missing or invalid for post ID ${id}. Using current date as fallback.`);\n    createdAtString = new Date().toISOString();\n  }\n  let updatedAtString: string | undefined = undefined;\n  if (data.updatedAt && typeof (data.updatedAt as any).toDate === 'function') {\n    updatedAtString = (data.updatedAt as Timestamp).toDate().toISOString();\n  } else if (data.updatedAt instanceof Date) {\n    updatedAtString = data.updatedAt.toISOString();\n  } else if (typeof data.updatedAt === 'string') {\n    const parsedDate = new Date(data.updatedAt);\n    if (!isNaN(parsedDate.getTime())) {\n      updatedAtString = parsedDate.toISOString();\n    } else {\n      console.warn(`[mapBlogPostFromFirestore] Invalid date string for updatedAt for post ID ${id}: \"${data.updatedAt}\".`);\n    }\n  }\n  return {\n    id,\n    slug: data.slug || id,\n    title: data.title || 'Untitled Post',\n    content: data.content || '',\n    excerpt: data.excerpt || '',\n    authorId: data.authorId || 'unknown_author',\n    authorName: data.authorName || 'Unknown Author',\n    createdAt: createdAtString,\n    updatedAt: updatedAtString,\n    status: data.status || 'draft',\n    tags: data.tags || [],\n    featuredImageUrl: data.featuredImageUrl === null ? undefined : (data.featuredImageUrl || undefined),\n    dataAiHint: data.dataAiHint,\n  };\n};\n\nconst mapMessageFromFirestore = (docData: any, id: string): MessageType => {\n  const data = docData as Partial<FirestoreMessage> & { senderId: string; recipientId: string; timestamp: Timestamp; };\n  let conversationId = data.conversationId;\n  if (!conversationId && data.senderId && data.recipientId) {\n    console.warn(`[mapMessageFromFirestore] Message ID ${id} is missing conversationId in Firestore. Generating fallback.`);\n    conversationId = generateConversationId(data.senderId, data.recipientId);\n  } else if (!conversationId) {\n    console.error(`[mapMessageFromFirestore] Message ID ${id} is missing conversationId AND senderId/recipientId, cannot generate fallback. Assigning problematic ID.`);\n    conversationId = `error_missing_conv_id_and_cannot_generate_${id}`;\n  }\n  return {\n    id,\n    conversationId: conversationId!,\n    senderId: data.senderId!,\n    senderName: data.senderName || 'Unknown Sender',\n    recipientId: data.recipientId!,\n    recipientName: data.recipientName || 'Unknown Recipient',\n    content: data.content || '',\n    timestamp: data.timestamp.toDate().toISOString(),\n    read: data.read || false,\n  };\n};\n\n// --- User Profile Functions ---\nexport async function setUserProfile(userId: string, profileData: Partial<Omit<FirestoreUserProfile, 'id'>>) {\n  if (!userId) throw new Error(\"User ID is required to set user profile.\");\n  const userDocRef = doc(db, \"users\", userId);\n  const userSnap = await getDoc(userDocRef);\n  const isCreating = !userSnap.exists();\n  const dataToSet: { [key: string]: any } = { ...profileData };\n\n  if (isCreating) {\n    if (!dataToSet.email || !dataToSet.role || !dataToSet.name) throw new Error(\"Essential fields (name, email, role) missing for new user profile.\");\n    dataToSet.createdAt = serverTimestamp();\n    dataToSet.profileImageUrl = dataToSet.profileImageUrl ?? null;\n    dataToSet.enableNotifications = dataToSet.enableNotifications ?? true; // Default for new users\n    dataToSet.favoriteCoachIds = dataToSet.favoriteCoachIds ?? []; // Initialize favoriteCoachIds\n\n    if (dataToSet.role === 'coach') {\n      dataToSet.subscriptionTier = dataToSet.subscriptionTier ?? 'free';\n      dataToSet.status = dataToSet.status ?? 'pending_approval';\n      dataToSet.availability = dataToSet.availability ?? [];\n      dataToSet.isFeaturedOnHomepage = dataToSet.isFeaturedOnHomepage ?? false;\n    }\n  } else {\n    dataToSet.profileImageUrl = profileData.profileImageUrl === undefined ? userSnap.data()?.profileImageUrl : (profileData.profileImageUrl ?? null);\n    dataToSet.location = profileData.location === undefined ? userSnap.data()?.location : (profileData.location ?? null);\n    dataToSet.websiteUrl = profileData.websiteUrl === undefined ? userSnap.data()?.websiteUrl : (profileData.websiteUrl ?? null);\n    dataToSet.introVideoUrl = profileData.introVideoUrl === undefined ? userSnap.data()?.introVideoUrl : (profileData.introVideoUrl ?? null);\n    \n    if (profileData.role === 'coach') { \n        if (profileData.isFeaturedOnHomepage === undefined) {\n            dataToSet.isFeaturedOnHomepage = userSnap.data()?.isFeaturedOnHomepage ?? false;\n        }\n    }\n  }\n  dataToSet.updatedAt = serverTimestamp();\n\n  const cleanData = pruneUndefined(dataToSet);\n\n  await setDoc(userDocRef, cleanData, { merge: !isCreating });\n}\n\nexport async function getUserProfile(userId: string): Promise<FirestoreUserProfile | null> {\n  if (!userId) return null;\n  const userDocRef = doc(db, \"users\", userId);\n  const userSnap = await getDoc(userDocRef);\n  if (userSnap.exists()) {\n    const data = userSnap.data();\n    return {\n      id: userSnap.id,\n      ...data,\n      availability: data.availability || [],\n      isFeaturedOnHomepage: data.role === 'coach' ? (data.isFeaturedOnHomepage || false) : undefined,\n      favoriteCoachIds: data.favoriteCoachIds || [], \n      enableNotifications: data.enableNotifications === undefined ? true : data.enableNotifications,\n    } as FirestoreUserProfile;\n  }\n  return null;\n}\n\nexport async function getAllUserProfilesForAdmin(): Promise<FirestoreUserProfile[]> {\n  const usersRef = collection(db, 'users');\n  const q = query(usersRef, orderBy('createdAt', 'desc'));\n  const querySnapshot = await getDocs(q);\n  return querySnapshot.docs.map(docSnap => {\n    const data = docSnap.data();\n    return {\n      id: docSnap.id,\n      ...data,\n      createdAt: data.createdAt instanceof Timestamp ? data.createdAt.toDate().toISOString() : (data.createdAt || new Date().toISOString()),\n      updatedAt: data.updatedAt instanceof Timestamp ? data.updatedAt.toDate().toISOString() : (data.updatedAt || new Date().toISOString()),\n      isFeaturedOnHomepage: data.role === 'coach' ? (data.isFeaturedOnHomepage || false) : undefined,\n      favoriteCoachIds: data.favoriteCoachIds || [],\n      enableNotifications: data.enableNotifications === undefined ? true : data.enableNotifications,\n    } as FirestoreUserProfile;\n  });\n}\n\nexport async function suspendUserAccount(userId: string): Promise<void> {\n  if (!userId) {\n    throw new Error(\"User ID is required to suspend account.\");\n  }\n  const userDocRef = doc(db, \"users\", userId);\n  await updateDoc(userDocRef, { status: 'suspended' });\n}\n\nexport async function unsuspendUserAccount(userId: string): Promise<void> {\n  if (!userId) {\n    throw new Error(\"User ID is required to unsuspend account.\");\n  }\n  const userDocRef = doc(db, \"users\", userId);\n  await updateDoc(userDocRef, { status: 'active' });\n}\n\n// --- Coach Fetching Functions ---\nexport async function getFeaturedCoaches(count = 3): Promise<Coach[]> {\n  const q = query(\n    collection(db, \"users\"),\n    where(\"role\", \"==\", \"coach\"),\n    where(\"status\", \"==\", \"approved\"),\n    where(\"isFeaturedOnHomepage\", \"==\", true),\n    firestoreLimit(count)\n  );\n  const querySnapshot = await getDocs(q);\n  return querySnapshot.docs.map(docSnapshot => mapCoachFromFirestore(docSnapshot.data(), docSnapshot.id));\n}\n\nexport async function getAllCoaches(filters?: { searchTerm?: string, includeAllStatuses?: boolean }): Promise<Coach[]> {\n  const qConstraints = [where(\"role\", \"==\", \"coach\")];\n  if (!filters?.includeAllStatuses) qConstraints.push(where(\"status\", \"==\", \"approved\"));\n  qConstraints.push(firestoreLimit(50));\n  const coachesQuery = query(collection(db, \"users\"), ...qConstraints);\n  const querySnapshot = await getDocs(coachesQuery);\n  let allCoaches = querySnapshot.docs.map(docSnapshot => mapCoachFromFirestore(docSnapshot.data(), docSnapshot.id));\n  if (filters?.searchTerm) {\n    const lowerSearchTerm = filters.searchTerm.toLowerCase();\n    allCoaches = allCoaches.filter(coach =>\n      coach.name.toLowerCase().includes(lowerSearchTerm) ||\n      (coach.bio && coach.bio.toLowerCase().includes(lowerSearchTerm)) ||\n      (Array.isArray(coach.specialties) && coach.specialties.some(s => s.toLowerCase().includes(lowerSearchTerm))) ||\n      (() => {\n        const keywordsArray = Array.isArray(coach.keywords)\n          ? coach.keywords\n          : (typeof coach.keywords === 'string' ? coach.keywords.split(',').map(k => k.trim()).filter(Boolean) : []);\n        return keywordsArray.some(k => k.toLowerCase().includes(lowerSearchTerm));\n      })()\n    );\n  }\n  return allCoaches;\n}\n\nexport async function getCoachById(coachId: string): Promise<Coach | null> {\n  if (!coachId) return null;\n  const userProfile = await getUserProfile(coachId);\n  if (userProfile && userProfile.role === 'coach') return mapCoachFromFirestore(userProfile, userProfile.id);\n  return null;\n}\n\nexport async function getAllCoachIds(): Promise<string[]> {\n  const q = query(collection(db, \"users\"), where(\"role\", \"==\", \"coach\"), where(\"status\", \"==\", \"approved\"));\n  const querySnapshot = await getDocs(q);\n  return querySnapshot.docs.map(docSnapshot => docSnapshot.id);\n}\n\nexport async function updateCoachSubscriptionTier(coachId: string, tier: 'free' | 'premium'): Promise<void> {\n  if (!coachId) throw new Error(\"Coach ID is required.\");\n  await updateDoc(doc(db, \"users\", coachId), {\n    subscriptionTier: tier,\n    updatedAt: serverTimestamp()\n  });\n}\n\nexport async function updateCoachStatus(coachId: string, status: CoachStatus): Promise<void> {\n  if (!coachId) throw new Error(\"Coach ID is required.\");\n  await updateDoc(doc(db, \"users\", coachId), {\n    status: status,\n    updatedAt: serverTimestamp()\n  });\n}\n\nexport async function updateCoachFeatureStatus(coachId: string, isFeatured: boolean): Promise<void> {\n  if (!coachId) {\n    throw new Error(\"Coach ID is required to update feature status.\");\n  }\n  const coachRef = doc(db, \"users\", coachId);\n  await updateDoc(coachRef, {\n    isFeaturedOnHomepage: isFeatured,\n    updatedAt: serverTimestamp()\n  });\n}\n\n// --- Blog Post Functions ---\nexport async function createFirestoreBlogPost(postData: { title: string; content: string; status: 'draft' | 'pending_approval'; authorId: string; authorName: string; excerpt?: string; tags?: string; featuredImageUrl?: string; slug?: string; }): Promise<string> {\n  const blogsCollection = collection(db, \"blogs\");\n  const slug = postData.slug || (postData.title ? postData.title.toLowerCase().replace(/\\s+/g, '-').replace(/[^\\w-]+/g, '') : `post-${Date.now()}`);\n  const tagsArray = postData.tags ? postData.tags.split(',').map(tag => tag.trim()).filter(Boolean) : [];\n  const dataToSave: Omit<FirestoreBlogPost, 'id'> = {\n    ...postData,\n    slug,\n    tags: tagsArray,\n    featuredImageUrl: postData.featuredImageUrl || null,\n    createdAt: serverTimestamp() as Timestamp,\n    updatedAt: serverTimestamp() as Timestamp,\n  };\n  const newPostRef = await addDoc(blogsCollection, dataToSave);\n  return newPostRef.id;\n}\n\nexport async function updateFirestoreBlogPost(postId: string, postData: Partial<Omit<FirestoreBlogPost, 'id' | 'createdAt' | 'authorId' | 'authorName' | 'slug'>>) {\n  const dataToUpdate: any = { ...postData, updatedAt: serverTimestamp() };\n  if (postData.tags !== undefined) {\n    dataToUpdate.tags = Array.isArray(postData.tags) ? postData.tags.map(tag => tag.trim()).filter(Boolean) : [];\n  }\n  if (postData.hasOwnProperty('featuredImageUrl')) {\n    dataToUpdate.featuredImageUrl = postData.featuredImageUrl || null;\n  }\n  await updateDoc(doc(db, \"blogs\", postId), dataToUpdate);\n}\n\nexport async function getFirestoreBlogPost(postId: string): Promise<BlogPost | null> {\n  const postDoc = await getDoc(doc(db, \"blogs\", postId));\n  return postDoc.exists() ? mapBlogPostFromFirestore(postDoc.data(), postDoc.id) : null;\n}\n\nexport async function getFirestoreBlogPostBySlug(slug: string): Promise<BlogPost | null> {\n  const q = query(collection(db, \"blogs\"), where(\"slug\", \"==\", slug), firestoreLimit(1));\n  const querySnapshot = await getDocs(q);\n  if (!querySnapshot.empty) return mapBlogPostFromFirestore(querySnapshot.docs[0].data(), querySnapshot.docs[0].id);\n  return null;\n}\n\nexport async function getPublishedBlogPosts(count = 10): Promise<BlogPost[]> {\n  const q = query(collection(db, \"blogs\"), where(\"status\", \"==\", \"published\"), orderBy(\"createdAt\", \"desc\"), firestoreLimit(count));\n  const querySnapshot = await getDocs(q);\n  return querySnapshot.docs.map(docSnap => mapBlogPostFromFirestore(docSnap.data(), docSnap.id));\n}\n\nexport async function getAllPublishedBlogPostSlugs(): Promise<string[]> {\n  const q = query(collection(db, \"blogs\"), where(\"status\", \"==\", \"published\"));\n  const querySnapshot = await getDocs(q);\n  return querySnapshot.docs.map(docSnapshot => (docSnapshot.data() as FirestoreBlogPost).slug).filter(Boolean);\n}\n\nexport async function updateBlogPostStatus(postId: string, status: FirestoreBlogPost['status']): Promise<void> {\n  await updateDoc(doc(db, \"blogs\", postId), { status: status, updatedAt: serverTimestamp() });\n}\n\nexport async function deleteFirestoreBlogPost(postId: string): Promise<void> {\n  await deleteDoc(doc(db, \"blogs\", postId));\n}\n\nexport async function getAllBlogPostsForAdmin(count = 50): Promise<BlogPost[]> {\n  const q = query(collection(db, \"blogs\"), orderBy(\"createdAt\", \"desc\"), firestoreLimit(count));\n  const querySnapshot = await getDocs(q);\n  return querySnapshot.docs.map(docSnap => mapBlogPostFromFirestore(docSnap.data(), docSnap.id));\n}\n\nexport async function getMyBlogPosts(authorId: string, count = 50): Promise<BlogPost[]> {\n  if (!authorId) return [];\n  const q = query(collection(db, \"blogs\"), where(\"authorId\", \"==\", authorId), orderBy(\"createdAt\", \"desc\"), firestoreLimit(count));\n  const querySnapshot = await getDocs(q);\n  return querySnapshot.docs.map(docSnap => mapBlogPostFromFirestore(docSnap.data(), docSnap.id));\n}\n\nexport async function getBlogPostsByAuthor(authorId: string, count = 2): Promise<BlogPost[]> {\n  if (!authorId) return [];\n  const q = query(collection(db, \"blogs\"), where(\"authorId\", \"==\", authorId), where(\"status\", \"==\", \"published\"), orderBy(\"createdAt\", \"desc\"), firestoreLimit(count));\n  const querySnapshot = await getDocs(q);\n  return querySnapshot.docs.map(docSnap => mapBlogPostFromFirestore(docSnap.data(), docSnap.id));\n}\n\n// --- Messaging Functions ---\nexport async function sendMessage(messageData: Omit<FirestoreMessage, 'id' | 'timestamp' | 'read' | 'conversationId'>): Promise<string> {\n  if (!messageData.senderId || !messageData.recipientId || !messageData.content || !messageData.senderName || !messageData.recipientName) {\n    throw new Error(\"Sender ID, Recipient ID, content, sender name, and recipient name are required.\");\n  }\n  if (messageData.senderId === messageData.recipientId) throw new Error(\"Sender and recipient cannot be the same person.\");\n  const conversationId = generateConversationId(messageData.senderId, messageData.recipientId);\n  if (conversationId.startsWith('error_invalid_user_ids_for_conv_id')) {\n    throw new Error(\"Failed to send message due to invalid user IDs for conversation ID generation.\");\n  }\n  const messagesCollection = collection(db, \"messages\");\n  const messageToSend: Omit<FirestoreMessage, 'id'> = { ...messageData, conversationId, timestamp: serverTimestamp() as Timestamp, read: false };\n  const newMessageRef = await addDoc(messagesCollection, messageToSend);\n  return newMessageRef.id;\n}\n\nexport async function markMessagesAsRead(messageIdsToMark: string[], currentUserId: string): Promise<void> {\n  if (!messageIdsToMark || messageIdsToMark.length === 0 || !currentUserId) return;\n  const batch = writeBatch(db);\n  let actuallyMarkedCount = 0;\n  for (const messageId of messageIdsToMark) {\n    const messageRef = doc(db, \"messages\", messageId);\n    try {\n      const messageSnap = await getDoc(messageRef);\n      if (messageSnap.exists()) {\n        const messageData = messageSnap.data() as FirestoreMessage;\n        if (messageData.recipientId === currentUserId && !messageData.read) {\n          batch.update(messageRef, { read: true });\n          actuallyMarkedCount++;\n        }\n      }\n    } catch (error) { console.error(\"[markMessagesAsRead] Error processing message ID:\", messageId, error); }\n  }\n  if (actuallyMarkedCount > 0) await batch.commit();\n}\n\nexport async function getMessagesForUser(userId: string, otherPartyId?: string | null, messageLimit = 30): Promise<MessageType[]> {\n  if (!userId) return [];\n  const messagesRef = collection(db, \"messages\");\n  const allMessagesMap = new Map<string, MessageType>();\n  const messageIdsToMarkReadClientSide: string[] = [];\n  const commonQueryParts = [orderBy(\"timestamp\", \"desc\"), firestoreLimit(messageLimit)];\n\n  const sentQueryConstraints = [where(\"senderId\", \"==\", userId), ...commonQueryParts];\n  if (otherPartyId) sentQueryConstraints.splice(1, 0, where(\"recipientId\", \"==\", otherPartyId));\n  const qSent = query(messagesRef, ...sentQueryConstraints);\n  const sentSnapshot = await getDocs(qSent);\n  sentSnapshot.forEach(docSnap => allMessagesMap.set(docSnap.id, mapMessageFromFirestore(docSnap.data(), docSnap.id)));\n\n  const receivedQueryConstraints = [where(\"recipientId\", \"==\", userId), ...commonQueryParts];\n  if (otherPartyId) receivedQueryConstraints.splice(1, 0, where(\"senderId\", \"==\", otherPartyId));\n  const qReceived = query(messagesRef, ...receivedQueryConstraints);\n  const receivedSnapshot = await getDocs(qReceived);\n  receivedSnapshot.forEach(docSnap => {\n    const msg = mapMessageFromFirestore(docSnap.data(), docSnap.id);\n    if (!allMessagesMap.has(docSnap.id)) allMessagesMap.set(docSnap.id, msg);\n    if (otherPartyId && !msg.read && msg.recipientId === userId) messageIdsToMarkReadClientSide.push(msg.id);\n  });\n\n  if (otherPartyId && messageIdsToMarkReadClientSide.length > 0) {\n    markMessagesAsRead(messageIdsToMarkReadClientSide, userId).catch(err => console.error(\"[getMessagesForUser] Background markMessagesAsRead failed:\", err));\n  }\n  const combinedMessages = Array.from(allMessagesMap.values());\n  combinedMessages.sort((a, b) => otherPartyId ? new Date(a.timestamp).getTime() - new Date(b.timestamp).getTime() : new Date(b.timestamp).getTime() - new Date(a.timestamp).getTime());\n  return combinedMessages.slice(0, otherPartyId ? undefined : 50);\n}\n\nexport async function getAllMessagesForAdmin(count = 50): Promise<MessageType[]> {\n  const messagesCollection = collection(db, \"messages\");\n  const q = query(messagesCollection, orderBy(\"timestamp\", \"desc\"), firestoreLimit(count));\n  const querySnapshot = await getDocs(q);\n  return querySnapshot.docs.map(docSnapshot => mapMessageFromFirestore(docSnapshot.data(), docSnapshot.id));\n}\n\nexport async function getUserUnreadMessageCount(userId: string): Promise<number> {\n  if (!userId) {\n    console.warn(\"[getUserUnreadMessageCount] No userId provided, returning 0.\");\n    return 0;\n  }\n  try {\n    const messagesRef = collection(db, \"messages\");\n    const q = query(messagesRef, where(\"recipientId\", \"==\", userId), where(\"read\", \"==\", false));\n    const snapshot = await getCountFromServer(q);\n    return snapshot.data().count;\n  } catch (error) {\n    console.error(\"[getUserUnreadMessageCount] Error fetching unread message count for user:\", userId, error);\n    return 0;\n  }\n}\n\n// --- Admin Dashboard Stats ---\nexport async function getPendingCoachCount(): Promise<number> {\n  const coachesRef = collection(db, \"users\");\n  const q = query(coachesRef, where(\"role\", \"==\", \"coach\"), where(\"status\", \"==\", \"pending_approval\"));\n  const snapshot = await getCountFromServer(q);\n  return snapshot.data().count;\n}\n\nexport async function getTotalCoachCount(): Promise<number> {\n  const coachesRef = collection(db, \"users\");\n  const q = query(coachesRef, where(\"role\", \"==\", \"coach\"));\n  const snapshot = await getCountFromServer(q);\n  return snapshot.data().count;\n}\n\nexport async function getTotalUserCount(): Promise<number> {\n  const usersRef = collection(db, \"users\");\n  const snapshot = await getCountFromServer(usersRef);\n  return snapshot.data().count;\n}\n\nexport async function getTotalMessagesCount(): Promise<number> {\n  const messagesRef = collection(db, \"messages\");\n  const snapshot = await getCountFromServer(messagesRef);\n  return snapshot.data().count;\n}\n\nexport async function getTotalBlogPostsCount(): Promise<number> {\n  const blogsRef = collection(db, \"blogs\");\n  const snapshot = await getCountFromServer(blogsRef);\n  return snapshot.data().count;\n}\n\nexport async function getPendingBlogPostCount(): Promise<number> {\n  try {\n    const blogsRef = collection(db, \"blogs\");\n    const q = query(blogsRef, where(\"status\", \"==\", \"pending_approval\"));\n    const snapshot = await getCountFromServer(q);\n    console.log(`[getPendingBlogPostCount] Found ${snapshot.data().count} posts pending approval.`);\n    return snapshot.data().count;\n  } catch (error) {\n    console.error(\"[getPendingBlogPostCount] Error fetching count of pending blog posts:\", error);\n    return 0;\n  }\n}\n\nexport async function getActiveSubscriptionsCount(): Promise<number> {\n  const usersRef = collection(db, \"users\");\n  const q = query(usersRef, where(\"role\", \"==\", \"coach\"), where(\"subscriptionTier\", \"===\", \"premium\")); // Corrected to triple equals for \"premium\"\n  const snapshot = await getCountFromServer(q);\n  return snapshot.data().count;\n}\n\nexport async function getCoachUnreadMessageCount(coachId: string): Promise<number> {\n  if (!coachId) return 0;\n  const messagesRef = collection(db, \"messages\");\n  const q = query(messagesRef, where(\"recipientId\", \"==\", coachId), where(\"read\", \"==\", false));\n  const snapshot = await getCountFromServer(q);\n  return snapshot.data().count;\n}\n\nexport async function getCoachBlogStats(coachId: string): Promise<{ pending: number, published: number }> {\n  if (!coachId) return { pending: 0, published: 0 };\n  const blogsRef = collection(db, \"blogs\");\n  const pendingQuery = query(blogsRef, where(\"authorId\", \"==\", coachId), where(\"status\", \"in\", [\"draft\", \"pending_approval\"]));\n  const pendingSnapshot = await getCountFromServer(pendingQuery);\n  const publishedQuery = query(blogsRef, where(\"authorId\", \"==\", coachId), where(\"status\", \"==\", \"published\"));\n  const publishedSnapshot = await getCountFromServer(publishedQuery);\n  return { pending: pendingSnapshot.data().count, published: publishedSnapshot.data().count };\n}\n\n// --- Favorite Coach Functions ---\nexport async function addCoachToFavorites(userId: string, coachId: string): Promise<void> {\n  if (!userId || !coachId) throw new Error(\"User ID and Coach ID are required.\");\n  const userDocRef = doc(db, \"users\", userId);\n  // Optional: Check if coach exists and is approved before adding\n  // const coachProfile = await getCoachById(coachId);\n  // if (!coachProfile || coachProfile.status !== 'approved') {\n  //   console.warn(`Attempted to favorite a non-existent or non-approved coach (ID: ${coachId}).`);\n  //   return; // Or throw an error\n  // }\n  await updateDoc(userDocRef, {\n    favoriteCoachIds: arrayUnion(coachId),\n    updatedAt: serverTimestamp()\n  });\n}\n\nexport async function removeCoachFromFavorites(userId: string, coachId: string): Promise<void> {\n  if (!userId || !coachId) throw new Error(\"User ID and Coach ID are required.\");\n  const userDocRef = doc(db, \"users\", userId);\n  await updateDoc(userDocRef, {\n    favoriteCoachIds: arrayRemove(coachId),\n    updatedAt: serverTimestamp()\n  });\n}\n\nexport async function getFavoriteCoaches(userId: string): Promise<Coach[]> {\n  if (!userId) return [];\n  const userProfile = await getUserProfile(userId);\n\n  if (!userProfile || !Array.isArray(userProfile.favoriteCoachIds) || userProfile.favoriteCoachIds.length === 0) {\n    return [];\n  }\n\n  const favoriteCoachIds = userProfile.favoriteCoachIds;\n  const coaches: Coach[] = [];\n  const BATCH_SIZE = 30; \n\n  for (let i = 0; i < favoriteCoachIds.length; i += BATCH_SIZE) {\n    const batchIds = favoriteCoachIds.slice(i, i + BATCH_SIZE);\n    if (batchIds.length > 0) {\n      const q = query(\n        collection(db, \"users\"),\n        where(documentId(), \"in\", batchIds), // Changed to use documentId() directly\n        where(\"role\", \"==\", \"coach\"),\n        where(\"status\", \"==\", \"approved\") \n      );\n      const querySnapshot = await getDocs(q);\n      querySnapshot.forEach(docSnapshot => {\n        if (docSnapshot.exists()) {\n          coaches.push(mapCoachFromFirestore(docSnapshot.data(), docSnapshot.id));\n        }\n      });\n    }\n  }\n  return coaches;\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 881, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/lib/auth.tsx"],"sourcesContent":["\n\"use client\";\n\nimport type { User, UserRole, FirestoreUserProfile, CoachStatus } from '@/types';\nimport { createContext, useContext, useState, ReactNode, useEffect } from 'react';\nimport { auth } from './firebase'; // Correctly imports auth from firebase.ts\nimport {\n  onAuthStateChanged,\n  signInWithEmailAndPassword,\n  createUserWithEmailAndPassword,\n  signOut,\n  updateProfile as updateFirebaseProfile,\n  type User as FirebaseUser\n} from 'firebase/auth';\nimport { setUserProfile, getUserProfile } from './firestore';\nimport { doc, getDoc, serverTimestamp, updateDoc } from 'firebase/firestore'; // Added for potential role update\nimport { db } from './firebase'; // Added for doc reference\n\ninterface AuthContextType {\n  user: User | null;\n  login: (email: string, pass: string) => Promise<void>;\n  signup: (name: string, email: string, pass: string, role: UserRole) => Promise<UserRole | null>;\n  logout: () => Promise<void>;\n  loading: boolean;\n  getFirebaseAuthToken: () => Promise<string | null>; // New function\n}\n\nconst AuthContext = createContext<AuthContextType | undefined>(undefined);\n\nconst SIGNUP_ROLE_KEY = 'coachconnect-signup-role';\nconst SIGNUP_NAME_KEY = 'coachconnect-signup-name';\n\n\nexport function AuthProvider({ children }: { children: ReactNode }) {\n  const [user, setUser] = useState<User | null>(null);\n  const [firebaseUserSt, setFirebaseUserSt] = useState<FirebaseUser | null>(null); // State for Firebase User\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    console.log(\"[AuthProvider] Mounting onAuthStateChanged listener.\");\n    const unsubscribe = onAuthStateChanged(auth, async (currentFirebaseUser: FirebaseUser | null) => {\n      console.log(\"[AuthProvider] onAuthStateChanged event. Firebase user:\", currentFirebaseUser ? currentFirebaseUser.uid : 'null');\n      setFirebaseUserSt(currentFirebaseUser); // Store the Firebase user\n\n      if (currentFirebaseUser) {\n        if (!currentFirebaseUser.email || typeof currentFirebaseUser.email !== 'string' || currentFirebaseUser.email.trim() === '') {\n          console.error(\"[AuthProvider] CRITICAL: Firebase user object (UID: \" + currentFirebaseUser.uid + \") has an invalid or missing email during onAuthStateChanged. Aborting profile processing.\");\n          setUser(null); // Clear any potentially bad state\n          setLoading(false);\n          return; // Stop processing if email is invalid\n        }\n        const validEmail = currentFirebaseUser.email;\n\n        let determinedRole: UserRole = 'user'; // Default role\n        let userName = currentFirebaseUser.displayName || validEmail.split('@')[0] || 'User';\n        let profileNeedsCreationDueToSignup = false;\n\n        // Check for admin email first\n        if (validEmail === 'hello@thelifecoachingcafe.com') {\n          determinedRole = 'admin';\n          userName = 'Admin User'; // Or fetch name from Firestore if preferred\n          console.log(`[AuthProvider] Admin email detected: ${validEmail}, role set to 'admin'.`);\n        } else {\n          // Check localStorage for role set during signup process\n          const signupRole = localStorage.getItem(SIGNUP_ROLE_KEY) as UserRole | null;\n          const signupName = localStorage.getItem(SIGNUP_NAME_KEY);\n          if (signupRole) {\n            determinedRole = signupRole;\n            if (signupName) userName = signupName;\n            profileNeedsCreationDueToSignup = true; // Flag that Firestore profile creation is expected\n            console.log(`[AuthProvider] Role from localStorage: ${determinedRole} for ${validEmail}`);\n          }\n        }\n\n        try {\n          const userProfile = await getUserProfile(currentFirebaseUser.uid);\n          \n          if (userProfile) {\n            console.log(`[AuthProvider] Existing Firestore profile found for ${validEmail}:`, JSON.stringify(userProfile, null, 2));\n            // If admin logs in, and their Firestore role is somehow different, update it.\n            // This is a safety check.\n            if (validEmail === 'hello@thelifecoachingcafe.com' && userProfile.role !== 'admin') {\n              console.warn(`[AuthProvider] Admin ${validEmail} had role '${userProfile.role}' in Firestore. Updating to 'admin'.`);\n              const userDocRef = doc(db, \"users\", currentFirebaseUser.uid);\n              await updateDoc(userDocRef, { role: 'admin', updatedAt: serverTimestamp() });\n              userProfile.role = 'admin'; // Update local copy\n            }\n            \n            const appUser: User = {\n              id: currentFirebaseUser.uid,\n              email: userProfile.email || validEmail, // Prefer Firestore email, fallback to auth email\n              role: userProfile.role,   // Use role from Firestore profile\n              name: userProfile.name || userName, // Prefer Firestore name\n              profileImageUrl: userProfile.profileImageUrl || currentFirebaseUser.photoURL || undefined,\n            };\n            setUser(appUser);\n            console.log(\"[AuthProvider] App user context SET from existing Firestore profile:\", JSON.stringify(appUser, null, 2));\n            if (profileNeedsCreationDueToSignup) {\n              localStorage.removeItem(SIGNUP_ROLE_KEY);\n              localStorage.removeItem(SIGNUP_NAME_KEY);\n            }\n          } else if (profileNeedsCreationDueToSignup || validEmail === 'hello@thelifecoachingcafe.com') {\n            // Create profile if it's a new signup or if it's the admin user and their profile is missing\n            console.log(`[AuthProvider] No Firestore profile for ${validEmail} (UID: ${currentFirebaseUser.uid}). Creating profile with role: ${determinedRole}, name: ${userName}.`);\n            \n            const initialProfileData: Partial<Omit<FirestoreUserProfile, 'id' | 'createdAt' | 'updatedAt'>> = {\n              name: userName,\n              email: validEmail,\n              role: determinedRole,\n              profileImageUrl: currentFirebaseUser.photoURL || null, // Explicitly null if no photoURL\n            };\n\n            if (determinedRole === 'coach') {\n              initialProfileData.subscriptionTier = 'free';\n              initialProfileData.status = 'pending_approval';\n            }\n            \n            console.log(\"[AuthProvider] Calling setUserProfile for new user with initialProfileData:\", JSON.stringify(initialProfileData, null, 2));\n            await setUserProfile(currentFirebaseUser.uid, initialProfileData); // This creates the doc with timestamps\n            \n            const appUser: User = { \n              id: currentFirebaseUser.uid, \n              email: validEmail, \n              role: determinedRole, \n              name: userName,\n              profileImageUrl: initialProfileData.profileImageUrl || undefined,\n            };\n            setUser(appUser);\n            console.log(\"[AuthProvider] New Firestore profile created & app user context SET:\", JSON.stringify(appUser, null, 2));\n            localStorage.removeItem(SIGNUP_ROLE_KEY);\n            localStorage.removeItem(SIGNUP_NAME_KEY);\n          } else {\n            // User is authenticated with Firebase Auth but has no Firestore profile and isn't a fresh signup.\n            // This state should ideally not be common if signup flow is robust.\n            // We might create a default 'user' profile or log an anomaly.\n            console.warn(`[AuthProvider] User ${validEmail} (UID: ${currentFirebaseUser.uid}) is authenticated but has no Firestore profile and not a flagged new signup. Setting role to 'user' by default and creating profile.`);\n             const defaultProfileData: Partial<Omit<FirestoreUserProfile, 'id' | 'createdAt' | 'updatedAt'>> = {\n              name: userName,\n              email: validEmail,\n              role: 'user', \n              profileImageUrl: currentFirebaseUser.photoURL || null,\n            };\n            await setUserProfile(currentFirebaseUser.uid, defaultProfileData);\n            const appUser: User = { id: currentFirebaseUser.uid, email: validEmail, role: 'user', name: userName, profileImageUrl: defaultProfileData.profileImageUrl || undefined };\n            setUser(appUser);\n            console.log(\"[AuthProvider] Default 'user' Firestore profile created and app user context set.\");\n          }\n        } catch (profileError) {\n          console.error(\"[AuthProvider] Error processing user profile in onAuthStateChanged:\", profileError);\n          setUser(null); \n        }\n      } else { \n        setUser(null);\n        console.log(\"[AuthProvider] No Firebase user, app user context set to null.\");\n        localStorage.removeItem(SIGNUP_ROLE_KEY); \n        localStorage.removeItem(SIGNUP_NAME_KEY);\n      }\n      setLoading(false);\n      console.log(\"[AuthProvider] Loading state set to false.\");\n    });\n\n    return () => {\n      console.log(\"[AuthProvider] Unmounting onAuthStateChanged listener.\");\n      unsubscribe();\n    };\n  }, []);\n\n  const loginUser = async (email: string, pass: string) => {\n    setLoading(true);\n    console.log(`[AuthProvider] loginUser attempting for ${email}`);\n    try {\n      await signInWithEmailAndPassword(auth, email, pass);\n      // onAuthStateChanged will handle setting the user state and role based on Firestore data\n      console.log(`[AuthProvider] Firebase signInWithEmailAndPassword successful for ${email}. Waiting for onAuthStateChanged.`);\n    } catch (error: any) {\n      setLoading(false); \n      console.error(\"[AuthProvider] Firebase login error:\", error.code, error.message);\n      throw error; \n    }\n  };\n\n  const signupUser = async (name: string, email: string, pass: string, role: UserRole): Promise<UserRole | null> => {\n    setLoading(true);\n    console.log(`[AuthProvider] signupUser: Attempting for ${email} as ${role} with name: ${name}`);\n    try {\n      // Store intended role and name to be picked up by onAuthStateChanged\n      localStorage.setItem(SIGNUP_ROLE_KEY, role);\n      localStorage.setItem(SIGNUP_NAME_KEY, name); // Store the name from form\n\n      const userCredential = await createUserWithEmailAndPassword(auth, email, pass);\n      const newFirebaseUser = userCredential.user;\n      console.log(`[AuthProvider] signupUser: Firebase Auth user CREATED: ${newFirebaseUser.uid} for email ${email}`);\n\n      // Update Firebase Auth profile (displayName might take time to reflect in newFirebaseUser object immediately)\n      await updateFirebaseProfile(newFirebaseUser, { displayName: name });\n      console.log(`[AuthProvider] signupUser: Firebase Auth profile updated with displayName: ${name}`);\n      \n      // The onAuthStateChanged listener will now handle Firestore profile creation\n      // using the details from localStorage and the newFirebaseUser object.\n      // We return the role for immediate redirection logic on the signup page.\n      return role;\n    } catch (error: any) {\n      setLoading(false);\n      console.error(\"[AuthProvider] Firebase signup error:\", error.code, error.message);\n      localStorage.removeItem(SIGNUP_ROLE_KEY); \n      localStorage.removeItem(SIGNUP_NAME_KEY);\n      throw error; \n    }\n  };\n\n  const logoutUser = async () => {\n    console.log(\"[AuthProvider] logoutUser attempting.\");\n    setLoading(true);\n    try {\n      await signOut(auth);\n      console.log(\"[AuthProvider] Firebase signOut successful.\");\n      // User state will be set to null by onAuthStateChanged\n    } catch (error: any) {\n      console.error(\"[AuthProvider] Firebase logout error:\", error);\n      setLoading(false); \n      throw error;\n    }\n  };\n\n  const getFirebaseAuthToken = async (): Promise<string | null> => {\n    if (firebaseUserSt) {\n      try {\n        const token = await firebaseUserSt.getIdToken();\n        return token;\n      } catch (error) {\n        console.error(\"[AuthProvider] Error getting ID token:\", error);\n        return null;\n      }\n    }\n    console.warn(\"[AuthProvider] getFirebaseAuthToken called but no Firebase user available.\");\n    return null;\n  };\n\n\n  const providerValue = { user, login: loginUser, signup: signupUser, logout: logoutUser, loading, getFirebaseAuthToken };\n\n  return (\n    <AuthContext.Provider value={providerValue}>\n      {children}\n    </AuthContext.Provider>\n  );\n}\n\nexport function useAuth() {\n  const context = useContext(AuthContext);\n  if (context === undefined) {\n    throw new Error('useAuth must be used within an AuthProvider');\n  }\n  return context;\n}\n\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1134, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/sheet.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as SheetPrimitive from \"@radix-ui/react-dialog\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Sheet = SheetPrimitive.Root\n\nconst SheetTrigger = SheetPrimitive.Trigger\n\nconst SheetClose = SheetPrimitive.Close\n\nconst SheetPortal = SheetPrimitive.Portal\n\nconst SheetOverlay = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Overlay\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  />\n))\nSheetOverlay.displayName = SheetPrimitive.Overlay.displayName\n\nconst sheetVariants = cva(\n  \"fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500\",\n  {\n    variants: {\n      side: {\n        top: \"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top\",\n        bottom:\n          \"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom\",\n        left: \"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm\",\n        right:\n          \"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm\",\n      },\n    },\n    defaultVariants: {\n      side: \"right\",\n    },\n  }\n)\n\ninterface SheetContentProps\n  extends React.ComponentPropsWithoutRef<typeof SheetPrimitive.Content>,\n    VariantProps<typeof sheetVariants> {}\n\nconst SheetContent = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Content>,\n  SheetContentProps\n>(({ side = \"right\", className, children, ...props }, ref) => (\n  <SheetPortal>\n    <SheetOverlay />\n    <SheetPrimitive.Content\n      ref={ref}\n      className={cn(sheetVariants({ side }), className)}\n      {...props}\n    >\n      {children}\n      <SheetPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </SheetPrimitive.Close>\n    </SheetPrimitive.Content>\n  </SheetPortal>\n))\nSheetContent.displayName = SheetPrimitive.Content.displayName\n\nconst SheetHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-2 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nSheetHeader.displayName = \"SheetHeader\"\n\nconst SheetFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nSheetFooter.displayName = \"SheetFooter\"\n\nconst SheetTitle = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold text-foreground\", className)}\n    {...props}\n  />\n))\nSheetTitle.displayName = SheetPrimitive.Title.displayName\n\nconst SheetDescription = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nSheetDescription.displayName = SheetPrimitive.Description.displayName\n\nexport {\n  Sheet,\n  SheetPortal,\n  SheetOverlay,\n  SheetTrigger,\n  SheetClose,\n  SheetContent,\n  SheetHeader,\n  SheetFooter,\n  SheetTitle,\n  SheetDescription,\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;AAEA;AACA;AACA;AACA;AAEA;AAPA;;;;;;;AASA,MAAM,QAAQ,kKAAA,CAAA,OAAmB;AAEjC,MAAM,eAAe,kKAAA,CAAA,UAAsB;AAE3C,MAAM,aAAa,kKAAA,CAAA,QAAoB;AAEvC,MAAM,cAAc,kKAAA,CAAA,SAAqB;AAEzC,MAAM,6BAAe,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,kKAAA,CAAA,UAAsB;QACrB,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,2JACA;QAED,GAAG,KAAK;QACT,KAAK;;;;;;AAGT,aAAa,WAAW,GAAG,kKAAA,CAAA,UAAsB,CAAC,WAAW;AAE7D,MAAM,gBAAgB,CAAA,GAAA,gKAAA,CAAA,MAAG,AAAD,EACtB,oMACA;IACE,UAAU;QACR,MAAM;YACJ,KAAK;YACL,QACE;YACF,MAAM;YACN,OACE;QACJ;IACF;IACA,iBAAiB;QACf,MAAM;IACR;AACF;AAOF,MAAM,6BAAe,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGlC,CAAC,EAAE,OAAO,OAAO,EAAE,SAAS,EAAE,QAAQ,EAAE,GAAG,OAAO,EAAE,oBACpD,8OAAC;;0BACC,8OAAC;;;;;0BACD,8OAAC,kKAAA,CAAA,UAAsB;gBACrB,KAAK;gBACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,cAAc;oBAAE;gBAAK,IAAI;gBACtC,GAAG,KAAK;;oBAER;kCACD,8OAAC,kKAAA,CAAA,QAAoB;wBAAC,WAAU;;0CAC9B,8OAAC,4LAAA,CAAA,IAAC;gCAAC,WAAU;;;;;;0CACb,8OAAC;gCAAK,WAAU;0CAAU;;;;;;;;;;;;;;;;;;;;;;;;AAKlC,aAAa,WAAW,GAAG,kKAAA,CAAA,UAAsB,CAAC,WAAW;AAE7D,MAAM,cAAc,CAAC,EACnB,SAAS,EACT,GAAG,OACkC,iBACrC,8OAAC;QACC,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,oDACA;QAED,GAAG,KAAK;;;;;;AAGb,YAAY,WAAW,GAAG;AAE1B,MAAM,cAAc,CAAC,EACnB,SAAS,EACT,GAAG,OACkC,iBACrC,8OAAC;QACC,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,iEACA;QAED,GAAG,KAAK;;;;;;AAGb,YAAY,WAAW,GAAG;AAE1B,MAAM,2BAAa,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,kKAAA,CAAA,QAAoB;QACnB,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,yCAAyC;QACtD,GAAG,KAAK;;;;;;AAGb,WAAW,WAAW,GAAG,kKAAA,CAAA,QAAoB,CAAC,WAAW;AAEzD,MAAM,iCAAmB,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGtC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,kKAAA,CAAA,cAA0B;QACzB,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGb,iBAAiB,WAAW,GAAG,kKAAA,CAAA,cAA0B,CAAC,WAAW","debugId":null}},
    {"offset": {"line": 1283, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/layout/Header.tsx"],"sourcesContent":["\"use client\";\n\nimport Link from 'next/link';\nimport Image from 'next/image';\nimport { usePathname } from 'next/navigation';\nimport { Home, Search, BookOpen, LogIn, UserPlus, UserCircle, LogOut, Menu, LayoutDashboard, ShieldAlert, Users, Tag, Bell } from 'lucide-react';\nimport { Button } from '@/components/ui/button';\nimport { useAuth } from '@/lib/auth';\nimport { cn } from '@/lib/utils';\nimport { Sheet, SheetContent, SheetHeader, SheetTitle, SheetTrigger } from '@/components/ui/sheet';\nimport { useState, useEffect } from 'react';\nimport { getUserUnreadMessageCount } from '@/lib/firestore';\n\nconst navLinks = [\n  { href: '/', label: 'Home', icon: Home },\n  { href: '/find-a-coach', label: 'CoachMatch AI', icon: Search },\n  { href: '/browse-coaches', label: 'Browse Coaches', icon: Users },\n  { href: '/blog', label: 'Blog', icon: BookOpen },\n  // { href: '/pricing', label: 'Pricing', icon: Tag }, // Removed pricing link\n];\n\nconst NavLinkItem = ({ href, label, icon: Icon, onClick, variant = \"default\" }: { href: string; label: string; icon: React.ElementType; onClick?: () => void, variant?: \"default\" | \"ghost\" | \"primary\" }) => {\n  const pathname = usePathname();\n  const isActive = pathname === href;\n  \n  const baseClasses = \"flex items-center gap-2 px-3 py-2 rounded-md text-sm font-medium transition-colors\";\n  let activeClasses = \"\";\n  let inactiveClasses = \"\";\n\n  if (variant === \"primary\") {\n    activeClasses = \"bg-primary text-primary-foreground\"; \n    inactiveClasses = \"bg-primary text-primary-foreground hover:bg-primary/90\";\n  } else {\n    activeClasses = \"bg-primary/20 text-primary\";\n    inactiveClasses = \"text-foreground/70 hover:text-foreground hover:bg-muted\";\n  }\n\n  return (\n    <Link\n      href={href}\n      onClick={onClick}\n      className={cn(\n        baseClasses,\n        isActive ? activeClasses : inactiveClasses,\n        variant === \"primary\" && inactiveClasses\n      )}\n    >\n      <Icon className=\"h-5 w-5\" />\n      <span>{label}</span>\n    </Link>\n  );\n};\n\nexport function Header() {\n  const { user, logout, loading } = useAuth();\n  const [mobileMenuOpen, setMobileMenuOpen] = useState(false);\n  const [unreadCount, setUnreadCount] = useState(0);\n  const pathname = usePathname();\n\n  const dashboardLink = user ? `/dashboard/${user.role}` : '/login';\n  const dashboardLabel = user ? `${user.role.charAt(0).toUpperCase() + user.role.slice(1)} Dashboard` : '';\n  const DashboardIcon = user?.role === 'admin' ? ShieldAlert : user?.role === 'coach' ? LayoutDashboard : UserCircle;\n  \n  const messagesPageLink = user \n    ? user.role === 'coach' ? '/dashboard/coach/messages' \n    : user.role === 'user' ? '/dashboard/user/messages' \n    : user.role === 'admin' ? '/dashboard/admin/messages'\n    : '/login'\n    : '/login';\n\n  useEffect(() => {\n    if (user && user.id) {\n      getUserUnreadMessageCount(user.id)\n        .then(count => {\n          setUnreadCount(count);\n        })\n        .catch(error => {\n          console.error(\"Failed to fetch unread message count:\", error);\n        });\n    } else {\n      setUnreadCount(0);\n    }\n  }, [user, pathname]);\n\n  const logoUrl = \"https://firebasestorage.googleapis.com/v0/b/coachconnect-897af.firebasestorage.app/o/aaadb032-0d6f-4c06-a8a5-6a6064b4fb06_removalai_preview.png?alt=media&token=0c82d001-1e15-440d-bded-37de001e2d31\";\n\n  const closeMobileMenu = () => setMobileMenuOpen(false);\n  \n  return (\n    <header className=\"sticky top-0 z-50 w-full border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60\">\n      <div className=\"container mx-auto flex h-16 items-center justify-between px-4 sm:px-6 lg:px-8\">\n        <Link href=\"/\" className=\"flex items-center\" aria-label=\"The Life Coaching Cafe Home\">\n          <Image src={logoUrl} alt=\"The Life Coaching Cafe Logo\" width={160} height={40} priority className=\"object-contain\" style={{ height: 'auto' }}/>\n        </Link>\n        \n        <nav className=\"hidden md:flex items-center space-x-1 lg:space-x-2\">\n          {navLinks.filter(link => link.href !== '/').map(link => (\n            <NavLinkItem key={link.href} href={link.href} label={link.label} icon={link.icon} />\n          ))}\n          {!loading && (\n            user ? (\n              <>\n                {unreadCount > 0 && (\n                  <Link href={messagesPageLink} className=\"relative p-2 text-foreground/70 hover:text-foreground\">\n                    <Bell className=\"h-5 w-5\" />\n                    <span className=\"absolute top-0 right-0 inline-flex items-center justify-center px-2 py-1 text-xs font-bold leading-none text-red-100 transform translate-x-1/2 -translate-y-1/2 bg-red-600 rounded-full\">\n                      {unreadCount}\n                    </span>\n                  </Link>\n                )}\n                <NavLinkItem href={dashboardLink} label={dashboardLabel} icon={DashboardIcon} />\n                <Button variant=\"ghost\" onClick={logout} className=\"flex items-center gap-2 text-foreground/70 hover:text-foreground\">\n                  <LogOut className=\"h-5 w-5\" /> Logout\n                </Button>\n              </>\n            ) : (\n              <>\n                <NavLinkItem href=\"/login\" label=\"Login\" icon={LogIn} />\n                <NavLinkItem href=\"/signup\" label=\"User Sign Up\" icon={UserPlus} /> {/* MODIFIED HERE */}\n                <Button asChild variant=\"outline\" className=\"border-primary text-primary hover:bg-primary/10 hover:text-primary\">\n                  <a href=\"/pricing\">\n                    Register as a Coach\n                  </a>\n                </Button>\n              </>\n            )\n          )}\n        </nav>\n\n        {/* Mobile Navigation Trigger */}\n        <div className=\"md:hidden flex items-center\">\n          {!loading && user && unreadCount > 0 && (\n            <Link href={messagesPageLink} className=\"relative p-2 mr-2 text-foreground/70 hover:text-foreground\">\n              <Bell className=\"h-5 w-5\" />\n              <span className=\"absolute top-0 right-0 inline-flex items-center justify-center px-2 py-1 text-xs font-bold leading-none text-red-100 transform translate-x-1/2 -translate-y-1/2 bg-red-600 rounded-full\">\n                {unreadCount}\n              </span>\n            </Link>\n          )}\n          <Sheet open={mobileMenuOpen} onOpenChange={setMobileMenuOpen}>\n            <SheetTrigger asChild>\n              <Button variant=\"ghost\" size=\"icon\">\n                <Menu className=\"h-6 w-6\" />\n                <span className=\"sr-only\">Open menu</span>\n              </Button>\n            </SheetTrigger>\n            <SheetContent side=\"right\" className=\"w-full max-w-xs p-6\">\n              <SheetHeader>\n                <SheetTitle className=\"sr-only\">Main Menu</SheetTitle>\n              </SheetHeader>\n              <div className=\"flex flex-col space-y-4 mt-4\">\n                <Link href=\"/\" className=\"flex items-center mb-4\" onClick={closeMobileMenu} aria-label=\"The Life Coaching Cafe Home\">\n                  <Image src={logoUrl} alt=\"The Life Coaching Cafe Logo\" width={160} height={40} priority className=\"object-contain\" style={{ height: 'auto' }}/>\n                </Link>\n                {navLinks.map(link => ( \n                    (<NavLinkItem key={link.href} {...link} onClick={closeMobileMenu} />)\n                ))}\n                <hr className=\"my-2 border-border\" />\n                {!loading && (\n                  user ? (\n                    <>\n                      {unreadCount > 0 && (\n                        <Link href={messagesPageLink} onClick={closeMobileMenu} className=\"relative flex items-center gap-2 px-3 py-2 rounded-md text-sm font-medium transition-colors text-foreground/70 hover:text-foreground hover:bg-muted\">\n                          <Bell className=\"h-5 w-5\" />\n                          <span>Messages</span>\n                          <span className=\"ml-auto inline-flex items-center justify-center px-2 py-1 text-xs font-bold leading-none text-red-100 bg-red-600 rounded-full\">\n                            {unreadCount}\n                          </span>\n                        </Link>\n                      )}\n                      <NavLinkItem href={dashboardLink} label={dashboardLabel} icon={DashboardIcon} onClick={closeMobileMenu} />\n                      <Button variant=\"ghost\" onClick={() => { logout(); closeMobileMenu(); }} className=\"flex items-center gap-2 text-foreground/70 hover:text-foreground justify-start px-3 py-2 w-full\">\n                        <LogOut className=\"h-5 w-5\" /> Logout\n                      </Button>\n                    </>\n                  ) : (\n                    <>\n                      <NavLinkItem href=\"/login\" label=\"Login\" icon={LogIn} onClick={closeMobileMenu} />\n                      <NavLinkItem href=\"/signup\" label=\"User Sign Up\" icon={UserPlus} onClick={closeMobileMenu} /> {/* MODIFIED HERE */}\n                      <Button asChild variant=\"outline\" onClick={closeMobileMenu} className=\"border-primary text-primary hover:bg-primary/10 hover:text-primary w-full justify-start px-3 py-2\">\n                        <a href=\"/pricing\">\n                           Register as a Coach\n                        </a>\n                      </Button>\n                    </>\n                  )\n                )}\n              </div>\n            </SheetContent>\n          </Sheet>\n        </div>\n      </div>\n    </header>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1827, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/hooks/use-toast.ts"],"sourcesContent":["\"use client\"\n\n// Inspired by react-hot-toast library\nimport * as React from \"react\"\n\nimport type {\n  ToastActionElement,\n  ToastProps,\n} from \"@/components/ui/toast\"\n\nconst TOAST_LIMIT = 1\nconst TOAST_REMOVE_DELAY = 1000000\n\ntype ToasterToast = ToastProps & {\n  id: string\n  title?: React.ReactNode\n  description?: React.ReactNode\n  action?: ToastActionElement\n}\n\nconst actionTypes = {\n  ADD_TOAST: \"ADD_TOAST\",\n  UPDATE_TOAST: \"UPDATE_TOAST\",\n  DISMISS_TOAST: \"DISMISS_TOAST\",\n  REMOVE_TOAST: \"REMOVE_TOAST\",\n} as const\n\nlet count = 0\n\nfunction genId() {\n  count = (count + 1) % Number.MAX_SAFE_INTEGER\n  return count.toString()\n}\n\ntype ActionType = typeof actionTypes\n\ntype Action =\n  | {\n      type: ActionType[\"ADD_TOAST\"]\n      toast: ToasterToast\n    }\n  | {\n      type: ActionType[\"UPDATE_TOAST\"]\n      toast: Partial<ToasterToast>\n    }\n  | {\n      type: ActionType[\"DISMISS_TOAST\"]\n      toastId?: ToasterToast[\"id\"]\n    }\n  | {\n      type: ActionType[\"REMOVE_TOAST\"]\n      toastId?: ToasterToast[\"id\"]\n    }\n\ninterface State {\n  toasts: ToasterToast[]\n}\n\nconst toastTimeouts = new Map<string, ReturnType<typeof setTimeout>>()\n\nconst addToRemoveQueue = (toastId: string) => {\n  if (toastTimeouts.has(toastId)) {\n    return\n  }\n\n  const timeout = setTimeout(() => {\n    toastTimeouts.delete(toastId)\n    dispatch({\n      type: \"REMOVE_TOAST\",\n      toastId: toastId,\n    })\n  }, TOAST_REMOVE_DELAY)\n\n  toastTimeouts.set(toastId, timeout)\n}\n\nexport const reducer = (state: State, action: Action): State => {\n  switch (action.type) {\n    case \"ADD_TOAST\":\n      return {\n        ...state,\n        toasts: [action.toast, ...state.toasts].slice(0, TOAST_LIMIT),\n      }\n\n    case \"UPDATE_TOAST\":\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === action.toast.id ? { ...t, ...action.toast } : t\n        ),\n      }\n\n    case \"DISMISS_TOAST\": {\n      const { toastId } = action\n\n      // ! Side effects ! - This could be extracted into a dismissToast() action,\n      // but I'll keep it here for simplicity\n      if (toastId) {\n        addToRemoveQueue(toastId)\n      } else {\n        state.toasts.forEach((toast) => {\n          addToRemoveQueue(toast.id)\n        })\n      }\n\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === toastId || toastId === undefined\n            ? {\n                ...t,\n                open: false,\n              }\n            : t\n        ),\n      }\n    }\n    case \"REMOVE_TOAST\":\n      if (action.toastId === undefined) {\n        return {\n          ...state,\n          toasts: [],\n        }\n      }\n      return {\n        ...state,\n        toasts: state.toasts.filter((t) => t.id !== action.toastId),\n      }\n  }\n}\n\nconst listeners: Array<(state: State) => void> = []\n\nlet memoryState: State = { toasts: [] }\n\nfunction dispatch(action: Action) {\n  memoryState = reducer(memoryState, action)\n  listeners.forEach((listener) => {\n    listener(memoryState)\n  })\n}\n\ntype Toast = Omit<ToasterToast, \"id\">\n\nfunction toast({ ...props }: Toast) {\n  const id = genId()\n\n  const update = (props: ToasterToast) =>\n    dispatch({\n      type: \"UPDATE_TOAST\",\n      toast: { ...props, id },\n    })\n  const dismiss = () => dispatch({ type: \"DISMISS_TOAST\", toastId: id })\n\n  dispatch({\n    type: \"ADD_TOAST\",\n    toast: {\n      ...props,\n      id,\n      open: true,\n      onOpenChange: (open) => {\n        if (!open) dismiss()\n      },\n    },\n  })\n\n  return {\n    id: id,\n    dismiss,\n    update,\n  }\n}\n\nfunction useToast() {\n  const [state, setState] = React.useState<State>(memoryState)\n\n  React.useEffect(() => {\n    listeners.push(setState)\n    return () => {\n      const index = listeners.indexOf(setState)\n      if (index > -1) {\n        listeners.splice(index, 1)\n      }\n    }\n  }, [state])\n\n  return {\n    ...state,\n    toast,\n    dismiss: (toastId?: string) => dispatch({ type: \"DISMISS_TOAST\", toastId }),\n  }\n}\n\nexport { useToast, toast }\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1983, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/toast.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as ToastPrimitives from \"@radix-ui/react-toast\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ToastProvider = ToastPrimitives.Provider\n\nconst ToastViewport = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Viewport>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Viewport>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Viewport\n    ref={ref}\n    className={cn(\n      \"fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]\",\n      className\n    )}\n    {...props}\n  />\n))\nToastViewport.displayName = ToastPrimitives.Viewport.displayName\n\nconst toastVariants = cva(\n  \"group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full\",\n  {\n    variants: {\n      variant: {\n        default: \"border bg-background text-foreground\",\n        destructive:\n          \"destructive group border-destructive bg-destructive text-destructive-foreground\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nconst Toast = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Root>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Root> &\n    VariantProps<typeof toastVariants>\n>(({ className, variant, ...props }, ref) => {\n  return (\n    <ToastPrimitives.Root\n      ref={ref}\n      className={cn(toastVariants({ variant }), className)}\n      {...props}\n    />\n  )\n})\nToast.displayName = ToastPrimitives.Root.displayName\n\nconst ToastAction = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Action>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Action>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Action\n    ref={ref}\n    className={cn(\n      \"inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive\",\n      className\n    )}\n    {...props}\n  />\n))\nToastAction.displayName = ToastPrimitives.Action.displayName\n\nconst ToastClose = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Close>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Close>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Close\n    ref={ref}\n    className={cn(\n      \"absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600\",\n      className\n    )}\n    toast-close=\"\"\n    {...props}\n  >\n    <X className=\"h-4 w-4\" />\n  </ToastPrimitives.Close>\n))\nToastClose.displayName = ToastPrimitives.Close.displayName\n\nconst ToastTitle = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Title>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Title>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Title\n    ref={ref}\n    className={cn(\"text-sm font-semibold\", className)}\n    {...props}\n  />\n))\nToastTitle.displayName = ToastPrimitives.Title.displayName\n\nconst ToastDescription = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Description>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Description>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Description\n    ref={ref}\n    className={cn(\"text-sm opacity-90\", className)}\n    {...props}\n  />\n))\nToastDescription.displayName = ToastPrimitives.Description.displayName\n\ntype ToastProps = React.ComponentPropsWithoutRef<typeof Toast>\n\ntype ToastActionElement = React.ReactElement<typeof ToastAction>\n\nexport {\n  type ToastProps,\n  type ToastActionElement,\n  ToastProvider,\n  ToastViewport,\n  Toast,\n  ToastTitle,\n  ToastDescription,\n  ToastClose,\n  ToastAction,\n}\n"],"names":[],"mappings":";;;;;;;;;;AAEA;AACA;AACA;AACA;AAEA;AAPA;;;;;;;AASA,MAAM,gBAAgB,iKAAA,CAAA,WAAwB;AAE9C,MAAM,8BAAgB,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGnC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,iKAAA,CAAA,WAAwB;QACvB,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,qIACA;QAED,GAAG,KAAK;;;;;;AAGb,cAAc,WAAW,GAAG,iKAAA,CAAA,WAAwB,CAAC,WAAW;AAEhE,MAAM,gBAAgB,CAAA,GAAA,gKAAA,CAAA,MAAG,AAAD,EACtB,6lBACA;IACE,UAAU;QACR,SAAS;YACP,SAAS;YACT,aACE;QACJ;IACF;IACA,iBAAiB;QACf,SAAS;IACX;AACF;AAGF,MAAM,sBAAQ,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAI3B,CAAC,EAAE,SAAS,EAAE,OAAO,EAAE,GAAG,OAAO,EAAE;IACnC,qBACE,8OAAC,iKAAA,CAAA,OAAoB;QACnB,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,cAAc;YAAE;QAAQ,IAAI;QACzC,GAAG,KAAK;;;;;;AAGf;AACA,MAAM,WAAW,GAAG,iKAAA,CAAA,OAAoB,CAAC,WAAW;AAEpD,MAAM,4BAAc,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,iKAAA,CAAA,SAAsB;QACrB,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,sgBACA;QAED,GAAG,KAAK;;;;;;AAGb,YAAY,WAAW,GAAG,iKAAA,CAAA,SAAsB,CAAC,WAAW;AAE5D,MAAM,2BAAa,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,iKAAA,CAAA,QAAqB;QACpB,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,yVACA;QAEF,eAAY;QACX,GAAG,KAAK;kBAET,cAAA,8OAAC,4LAAA,CAAA,IAAC;YAAC,WAAU;;;;;;;;;;;AAGjB,WAAW,WAAW,GAAG,iKAAA,CAAA,QAAqB,CAAC,WAAW;AAE1D,MAAM,2BAAa,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,iKAAA,CAAA,QAAqB;QACpB,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,yBAAyB;QACtC,GAAG,KAAK;;;;;;AAGb,WAAW,WAAW,GAAG,iKAAA,CAAA,QAAqB,CAAC,WAAW;AAE1D,MAAM,iCAAmB,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGtC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,iKAAA,CAAA,cAA2B;QAC1B,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,sBAAsB;QACnC,GAAG,KAAK;;;;;;AAGb,iBAAiB,WAAW,GAAG,iKAAA,CAAA,cAA2B,CAAC,WAAW","debugId":null}},
    {"offset": {"line": 2096, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/toaster.tsx"],"sourcesContent":["\"use client\"\n\nimport { useToast } from \"@/hooks/use-toast\"\nimport {\n  Toast,\n  ToastClose,\n  ToastDescription,\n  ToastProvider,\n  ToastTitle,\n  ToastViewport,\n} from \"@/components/ui/toast\"\n\nexport function Toaster() {\n  const { toasts } = useToast()\n\n  return (\n    <ToastProvider>\n      {toasts.map(function ({ id, title, description, action, ...props }) {\n        return (\n          <Toast key={id} {...props}>\n            <div className=\"grid gap-1\">\n              {title && <ToastTitle>{title}</ToastTitle>}\n              {description && (\n                <ToastDescription>{description}</ToastDescription>\n              )}\n            </div>\n            {action}\n            <ToastClose />\n          </Toast>\n        )\n      })}\n      <ToastViewport />\n    </ToastProvider>\n  )\n}\n"],"names":[],"mappings":";;;;AAEA;AACA;AAHA;;;;AAYO,SAAS;IACd,MAAM,EAAE,MAAM,EAAE,GAAG,CAAA,GAAA,4HAAA,CAAA,WAAQ,AAAD;IAE1B,qBACE,8OAAC,iIAAA,CAAA,gBAAa;;YACX,OAAO,GAAG,CAAC,SAAU,EAAE,EAAE,EAAE,KAAK,EAAE,WAAW,EAAE,MAAM,EAAE,GAAG,OAAO;gBAChE,qBACE,8OAAC,iIAAA,CAAA,QAAK;oBAAW,GAAG,KAAK;;sCACvB,8OAAC;4BAAI,WAAU;;gCACZ,uBAAS,8OAAC,iIAAA,CAAA,aAAU;8CAAE;;;;;;gCACtB,6BACC,8OAAC,iIAAA,CAAA,mBAAgB;8CAAE;;;;;;;;;;;;wBAGtB;sCACD,8OAAC,iIAAA,CAAA,aAAU;;;;;;mBARD;;;;;YAWhB;0BACA,8OAAC,iIAAA,CAAA,gBAAa;;;;;;;;;;;AAGpB","debugId":null}}]
}